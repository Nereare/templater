#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'repo_templater'

require 'tty-exit'
require 'tty-option'
require 'tty-prompt'

module RepoTemplater
  class Templater
    include TTY::Exit
    include TTY::Option

    flag :version do
      short '-v'
      long '--version'
      desc 'The version of the current installation'
    end

    flag :help do
      short '-h'
      long '--help'
      desc 'Print help text'
    end

    usage do
      header 'Create a series of metafiles to begin a new project'
      footer 'Available under the WTFPL by Igor Padoim.'
    end

    def run
      if params.errors.any?
        exit_with(:usage_error, params.errors.summary)
      else
        p = false
        p = 'version' if params[:version]
        p = 'help' if params[:help]
        puts "Running with param: #{p}" if p
      end
    end
  end
end

cmd = RepoTemplater::Templater.new
cmd.parse(ARGV)
cmd.run
